webpackJsonp([1],{18:function(o,e,r){"use strict";angular.module("myApp",[]).controller("ctrlLogin",function(o,e){var r=GetRequest(),n=""==r?"":r.openId,t=""==r?"":r.wechatId;o.alink=""!=n?"?wechatId="+t+"&openId="+n:"",o.formData={},o.submitLogin=function(){return o.formData.loginName=o.loginName,o.formData.password=o.password,o.formData.source="h5",/^1[34578]\d{9}$/.test(o.loginName)?(o.errorMsg="",void 0==o.password||o.password.length<6||o.password.length>16?void(o.errorMsg="输入长度不正确"):(o.errorMsg="",void e({method:"POST",url:"../newApi/login",data:o.formData,transformRequest:function(o){var e=[];for(var r in o)e.push(encodeURIComponent(r)+"="+encodeURIComponent(o[r]));return e.join("&")},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r){0==r.status?(alert("登录成功"),cookieFn.setCookie("ccat",r.data.token,24),""!=n&&"undefined"!=n?(o.paras={userCenterId:r.userInfo.id,weChatId:"1",openId:n},e({method:"POST",url:"../newApi/bindWebChat",data:o.paras,transformRequest:function(o){var e=[];for(var r in o)e.push(encodeURIComponent(r)+"="+encodeURIComponent(o[r]));return e.join("&")},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(o){window.location.href="../agentAuth/?wechatId=1&openId="+n})):(alert("参数错误！"),window.location.href="../errorPoint/")):/[a-zA-Z0-9\,\.\;\'\"]+/.test(r.msg)&&r.msg.length>20?o.errorMsg="数据异常！":o.errorMsg=r.msg}))):void(o.errorMsg="手机号输入格式不正确")},o.blur=function(){/^1[34578]\d{9}$/.test(o.loginName)?o.errorMsg="":o.errorMsg="输入的手机号码格式不正确！"},o.validatePass=function(){void 0==o.password||o.password.length<6||o.password.length>16?o.errorMsg="输入长度不正确":o.errorMsg=""}})}},[18]);